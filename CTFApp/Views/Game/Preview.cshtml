

@{
    ViewData["Title"] = "Upload File";
}

<h2>Upload an Image with a Message</h2>

<form id="uploadForm" >
    <label for="file">Choose an image file:</label>
    <input type="file" name="file" id="file" required />
    <br>
    <button type="submit">Upload</button>
</form>

<div id="result"></div>


<script>
        document.getElementById("uploadForm").addEventListener("submit", async function(event) {
        event.preventDefault();

        let formData = new FormData();
        let fileInput = document.getElementById("file");

        if (!fileInput.files.length) {
            document.getElementById("result").innerHTML = "<p style='color:red;'>No file selected!</p>";
            return;
        }

        formData.append("file", fileInput.files[0]);

        let response = await fetch("/api/profile", {
            method: "POST",
            body: formData
        });

        let data = await response.json();

        if (data.success) {
            document.getElementById("result").innerHTML = `
                <p style='color:green;'>${data.message}</p>
                <a href="${data.url}" target="_blank">${data.url}</a>
                <br>
                
            `;
        } else {
            document.getElementById("result").innerHTML = `<p style='color:red;'>${data.message}</p>`;
        }
    });
</script>



@* @if (ViewData["UploadedUrl"] != null) *@
@* { *@
@*     <h3>Uploaded File:</h3> *@
@*     <p>Click to view: <a href="@ViewData["UploadedUrl"]" target="_blank">@ViewData["UploadedUrl"]</a></p> *@
@*     <img src="@ViewData["UploadedUrl"]" width="300" alt="Uploaded Image" /> *@
@* } *@


@* <h3>Preview:</h3> *@
@* <div> *@
@*     @Html.Raw(ViewBag.UserContent)  *@
@* </div> *@

@* <div style="background-image: url('/images/@ViewBag.BackgroundImage'); width: 100%; height: 300px; background-size: cover;"> *@
@*     <!-- Background image container --> *@
@*     <p style="color: white; padding: 10px;">Your background has been applied!</p> *@
@* </div> *@
